
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../environments/">
      
      <link rel="icon" href="../images/home_server.png">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.16">
    
    
      
        <title>My approach - Self Hosted</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.26e3688c.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#key-features" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Self Hosted" class="md-header__button md-logo" aria-label="Self Hosted" data-md-component="logo">
      
  <img src="../images/servers-svgrepo-com.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Self Hosted
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              My approach
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
            
              <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_3" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9h-1.9M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69m-9.15 3.96h2.3L12 9l-1.15 3.65Z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
            
              <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_3">
            
              <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_2" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
              </label>
            
          
        </form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/JesseWebDotCom/self-hosted" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    self-hosted
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Self Hosted" class="md-nav__button md-logo" aria-label="Self Hosted" data-md-component="logo">
      
  <img src="../images/servers-svgrepo-com.svg" alt="logo">

    </a>
    Self Hosted
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/JesseWebDotCom/self-hosted" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    self-hosted
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          My approach
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        My approach
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#key-features" class="md-nav__link">
    Key Features
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-use" class="md-nav__link">
    How To Use
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    Configuration
  </a>
  
    <nav class="md-nav" aria-label="Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#compose-files" class="md-nav__link">
    compose files
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env-and-secrets" class="md-nav__link">
    .env and .secrets
  </a>
  
    <nav class="md-nav" aria-label=".env and .secrets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#variable-substitution" class="md-nav__link">
    Variable Substitution
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-secrets" class="md-nav__link">
    Example Secrets
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stackstxt" class="md-nav__link">
    stacks.txt
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    Troubleshooting
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#traefik-not-serving-ssl-certs" class="md-nav__link">
    Traefik not serving SSL certs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#s6-overlay-suexec-fatal-can-only-run-as-pid-1" class="md-nav__link">
    s6-overlay-suexec: fatal: can only run as pid 1
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Environments
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Environments
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../environments/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
      
      
      
        <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
          Demo
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          Demo
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../environments/demo/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_2" >
      
      
      
        <label class="md-nav__link" for="__nav_3_2_2" id="__nav_3_2_2_label" tabindex="0">
          Blogging
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_2">
          <span class="md-nav__icon md-icon"></span>
          Blogging
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../environments/demo/blogging/ghost/" class="md-nav__link">
        <a href='https://jessewebdotcom.github.io/self-hosted/environments/demo/blogging/ghost/'><img style='vertical-align:middle;padding-right: 5px' width=30px alt='ghost' title='ghost' src='https://cdn.jsdelivr.net/gh/walkxcode/dashboard-icons/png/ghost.png'>ghost</a>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3_2_3" id="__nav_3_2_3_label" tabindex="0">
          Coding
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_3">
          <span class="md-nav__icon md-icon"></span>
          Coding
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../environments/demo/coding/code-server/" class="md-nav__link">
        <a href='https://jessewebdotcom.github.io/self-hosted/environments/demo/coding/code-server/'><img style='vertical-align:middle;padding-right: 5px' width=30px alt='code-server' title='code-server' src='https://cdn.jsdelivr.net/gh/walkxcode/dashboard-icons/png/code-server.png'>code-server</a>
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../environments/demo/coding/gitea/" class="md-nav__link">
        <a href='https://jessewebdotcom.github.io/self-hosted/environments/demo/coding/gitea/'><img style='vertical-align:middle;padding-right: 5px' width=30px alt='gitea' title='gitea' src='https://cdn.jsdelivr.net/gh/walkxcode/dashboard-icons/png/gitea.png'>gitea</a>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_4" >
      
      
      
        <label class="md-nav__link" for="__nav_3_2_4" id="__nav_3_2_4_label" tabindex="0">
          Collaboration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_4">
          <span class="md-nav__icon md-icon"></span>
          Collaboration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../environments/demo/collaboration/wikijs/" class="md-nav__link">
        <a href='https://jessewebdotcom.github.io/self-hosted/environments/demo/collaboration/wikijs/'><img style='vertical-align:middle;padding-right: 5px' width=30px alt='wikijs' title='wikijs' src='https://cdn.jsdelivr.net/gh/walkxcode/dashboard-icons/png/wikijs.png'>wikijs</a>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_5" >
      
      
      
        <label class="md-nav__link" for="__nav_3_2_5" id="__nav_3_2_5_label" tabindex="0">
          Dashboards
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_5">
          <span class="md-nav__icon md-icon"></span>
          Dashboards
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../environments/demo/dashboards/flame/" class="md-nav__link">
        <a href='https://jessewebdotcom.github.io/self-hosted/environments/demo/dashboards/flame/'><img style='vertical-align:middle;padding-right: 5px' width=30px alt='flame' title='flame' src='https://cdn.jsdelivr.net/gh/walkxcode/dashboard-icons/png/flame.png'>flame</a>
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../environments/demo/dashboards/heimdall/" class="md-nav__link">
        <a href='https://jessewebdotcom.github.io/self-hosted/environments/demo/dashboards/heimdall/'><img style='vertical-align:middle;padding-right: 5px' width=30px alt='heimdall' title='heimdall' src='https://cdn.jsdelivr.net/gh/walkxcode/dashboard-icons/png/heimdall.png'>heimdall</a>
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../environments/demo/dashboards/homarr/" class="md-nav__link">
        <a href='https://jessewebdotcom.github.io/self-hosted/environments/demo/dashboards/homarr/'><img style='vertical-align:middle;padding-right: 5px' width=30px alt='homarr' title='homarr' src='https://cdn.jsdelivr.net/gh/walkxcode/dashboard-icons/png/homarr.png'>homarr</a>
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../environments/demo/dashboards/homepage/" class="md-nav__link">
        <a href='https://jessewebdotcom.github.io/self-hosted/environments/demo/dashboards/homepage/'><img style='vertical-align:middle;padding-right: 5px' width=30px alt='homepage' title='homepage' src='https://cdn.jsdelivr.net/gh/walkxcode/dashboard-icons/png/homepage.png'>homepage</a>
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../environments/demo/dashboards/homer/" class="md-nav__link">
        <a href='https://jessewebdotcom.github.io/self-hosted/environments/demo/dashboards/homer/'><img style='vertical-align:middle;padding-right: 5px' width=30px alt='homer' title='homer' src='https://cdn.jsdelivr.net/gh/walkxcode/dashboard-icons/png/homer.png'>homer</a>
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../environments/demo/dashboards/organizr/" class="md-nav__link">
        <a href='https://jessewebdotcom.github.io/self-hosted/environments/demo/dashboards/organizr/'><img style='vertical-align:middle;padding-right: 5px' width=30px alt='organizr' title='organizr' src='https://cdn.jsdelivr.net/gh/walkxcode/dashboard-icons/png/organizr.png'>organizr</a>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_6" >
      
      
      
        <label class="md-nav__link" for="__nav_3_2_6" id="__nav_3_2_6_label" tabindex="0">
          Media
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_6">
          <span class="md-nav__icon md-icon"></span>
          Media
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../environments/demo/media/immich/" class="md-nav__link">
        <a href='https://jessewebdotcom.github.io/self-hosted/environments/demo/media/immich/'><img style='vertical-align:middle;padding-right: 5px' width=30px alt='immich' title='immich' src='https://cdn.jsdelivr.net/gh/walkxcode/dashboard-icons/png/immich.png'>immich</a>
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../environments/demo/media/metube/" class="md-nav__link">
        <a href='https://jessewebdotcom.github.io/self-hosted/environments/demo/media/metube/'><img style='vertical-align:middle;padding-right: 5px' width=30px alt='metube' title='metube' src='https://cdn.jsdelivr.net/gh/walkxcode/dashboard-icons/png/metube.png'>metube</a>
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../environments/demo/media/tube-archivist/" class="md-nav__link">
        <a href='https://jessewebdotcom.github.io/self-hosted/environments/demo/media/tube-archivist/'><img style='vertical-align:middle;padding-right: 5px' width=30px alt='tube-archivist' title='tube-archivist' src='https://cdn.jsdelivr.net/gh/walkxcode/dashboard-icons/png/tube-archivist.png'>tube-archivist</a>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_7" >
      
      
      
        <label class="md-nav__link" for="__nav_3_2_7" id="__nav_3_2_7_label" tabindex="0">
          Monitoring
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_7">
          <span class="md-nav__icon md-icon"></span>
          Monitoring
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../environments/demo/monitoring/glances/" class="md-nav__link">
        <a href='https://jessewebdotcom.github.io/self-hosted/environments/demo/monitoring/glances/'><img style='vertical-align:middle;padding-right: 5px' width=30px alt='glances' title='glances' src='https://cdn.jsdelivr.net/gh/walkxcode/dashboard-icons/png/glances.png'>glances</a>
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../environments/demo/monitoring/uptime-kuma/" class="md-nav__link">
        <a href='https://jessewebdotcom.github.io/self-hosted/environments/demo/monitoring/uptime-kuma/'><img style='vertical-align:middle;padding-right: 5px' width=30px alt='uptime-kuma' title='uptime-kuma' src='https://cdn.jsdelivr.net/gh/walkxcode/dashboard-icons/png/uptime-kuma.png'>uptime-kuma</a>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_8" >
      
      
      
        <label class="md-nav__link" for="__nav_3_2_8" id="__nav_3_2_8_label" tabindex="0">
          Networking
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_8">
          <span class="md-nav__icon md-icon"></span>
          Networking
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../environments/demo/networking/adguardhome/" class="md-nav__link">
        <a href='https://jessewebdotcom.github.io/self-hosted/environments/demo/networking/adguardhome/'><img style='vertical-align:middle;padding-right: 5px' width=30px alt='adguardhome' title='adguardhome' src='https://cdn.jsdelivr.net/gh/walkxcode/dashboard-icons/png/adguard-home.png'>adguardhome</a>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_9" >
      
      
      
        <label class="md-nav__link" for="__nav_3_2_9" id="__nav_3_2_9_label" tabindex="0">
          Other
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_9_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_9">
          <span class="md-nav__icon md-icon"></span>
          Other
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../environments/demo/other/home-assistant/" class="md-nav__link">
        <a href='https://jessewebdotcom.github.io/self-hosted/environments/demo/other/home-assistant/'><img style='vertical-align:middle;padding-right: 5px' width=30px alt='home-assistant' title='home-assistant' src='https://cdn.jsdelivr.net/gh/walkxcode/dashboard-icons/png/home-assistant.png'>home-assistant</a>
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../environments/demo/other/linkding/" class="md-nav__link">
        <a href='https://jessewebdotcom.github.io/self-hosted/environments/demo/other/linkding/'><img style='vertical-align:middle;padding-right: 5px' width=30px alt='linkding' title='linkding' src='https://cdn.jsdelivr.net/gh/walkxcode/dashboard-icons/png/linkding.png'>linkding</a>
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../environments/demo/other/node-red/" class="md-nav__link">
        <a href='https://jessewebdotcom.github.io/self-hosted/environments/demo/other/node-red/'><img style='vertical-align:middle;padding-right: 5px' width=30px alt='node-red' title='node-red' src='https://cdn.jsdelivr.net/gh/walkxcode/dashboard-icons/png/node-red.png'>node-red</a>
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../environments/demo/other/vaultwarden/" class="md-nav__link">
        <a href='https://jessewebdotcom.github.io/self-hosted/environments/demo/other/vaultwarden/'><img style='vertical-align:middle;padding-right: 5px' width=30px alt='vaultwarden' title='vaultwarden' src='https://cdn.jsdelivr.net/gh/walkxcode/dashboard-icons/png/vaultwarden.png'>vaultwarden</a>
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../environments/demo/other/whoogle/" class="md-nav__link">
        <a href='https://jessewebdotcom.github.io/self-hosted/environments/demo/other/whoogle/'><img style='vertical-align:middle;padding-right: 5px' width=30px alt='whoogle' title='whoogle' src='https://cdn.jsdelivr.net/gh/walkxcode/dashboard-icons/png/whooglesearch.png'>whoogle</a>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_10" >
      
      
      
        <label class="md-nav__link" for="__nav_3_2_10" id="__nav_3_2_10_label" tabindex="0">
          Self hosting
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_10_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_10">
          <span class="md-nav__icon md-icon"></span>
          Self hosting
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../environments/demo/self-hosting/fail2ban/" class="md-nav__link">
        <a href='https://jessewebdotcom.github.io/self-hosted/environments/demo/self-hosting/fail2ban/'><img style='vertical-align:middle;padding-right: 5px' width=30px alt='fail2ban' title='fail2ban' src='https://cdn.jsdelivr.net/gh/walkxcode/dashboard-icons/png/fail2ban.png'>fail2ban</a>
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../environments/demo/self-hosting/socket-proxy/" class="md-nav__link">
        <a href='https://jessewebdotcom.github.io/self-hosted/environments/demo/self-hosting/socket-proxy/'><img style='vertical-align:middle;padding-right: 5px' width=30px alt='socket-proxy' title='socket-proxy' src='https://cdn.jsdelivr.net/gh/walkxcode/dashboard-icons/png/docker.png'>socket-proxy</a>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
          Example
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_3">
          <span class="md-nav__icon md-icon"></span>
          Example
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../environments/example/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3_2" >
      
      
      
        <label class="md-nav__link" for="__nav_3_3_2" id="__nav_3_3_2_label" tabindex="0">
          Basics
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_3_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_3_2">
          <span class="md-nav__icon md-icon"></span>
          Basics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../environments/example/basics/hello-world/" class="md-nav__link">
        <a href='https://jessewebdotcom.github.io/self-hosted/environments/example/basics/hello-world/'><img style='vertical-align:middle;padding-right: 5px' width=30px alt='hello-world' title='hello-world' src='https://cdn.jsdelivr.net/gh/walkxcode/dashboard-icons/png/hello-world.png'>hello-world</a>
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../environments/example/basics/whoami/" class="md-nav__link">
        <a href='https://jessewebdotcom.github.io/self-hosted/environments/example/basics/whoami/'><img style='vertical-align:middle;padding-right: 5px' width=30px alt='whoami' title='whoami' src='https://cdn.jsdelivr.net/gh/walkxcode/dashboard-icons/png/whoami.png'>whoami</a>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3_3_3" id="__nav_3_3_3_label" tabindex="0">
          Coding
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_3_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_3_3">
          <span class="md-nav__icon md-icon"></span>
          Coding
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../environments/example/coding/code-server/" class="md-nav__link">
        <a href='https://jessewebdotcom.github.io/self-hosted/environments/example/coding/code-server/'><img style='vertical-align:middle;padding-right: 5px' width=30px alt='code-server' title='code-server' src='https://cdn.jsdelivr.net/gh/walkxcode/dashboard-icons/png/code-server.png'>code-server</a>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#key-features" class="md-nav__link">
    Key Features
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-use" class="md-nav__link">
    How To Use
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    Configuration
  </a>
  
    <nav class="md-nav" aria-label="Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#compose-files" class="md-nav__link">
    compose files
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env-and-secrets" class="md-nav__link">
    .env and .secrets
  </a>
  
    <nav class="md-nav" aria-label=".env and .secrets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#variable-substitution" class="md-nav__link">
    Variable Substitution
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-secrets" class="md-nav__link">
    Example Secrets
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stackstxt" class="md-nav__link">
    stacks.txt
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    Troubleshooting
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#traefik-not-serving-ssl-certs" class="md-nav__link">
    Traefik not serving SSL certs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#s6-overlay-suexec-fatal-can-only-run-as-pid-1" class="md-nav__link">
    s6-overlay-suexec: fatal: can only run as pid 1
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>My approach</h1>

<p>A large environment leads to large compose and environment files which leads to all sorts of problems in terms of complexity, maintainability, readability, performance, scalability, security, privacy, and dependency management. My approach modularizes each environment, stack, and container into smaller chunks and manage them through a single, easy to use tool.</p>
<h2 id="key-features">Key Features</h2>
<ul>
<li><strong>Modularized</strong> - Containers (and their files) are grouped into "environments" &amp; "stacks"</li>
<li><strong>Organized</strong> - Stacks display and are controllable in Docker Desktop, Portainer, and other docker GUI management tools</li>
<li><strong>Easy to configure</strong> - When composing an environment, simply add/remove your "stack" name from stacks.txt to include/exclude a stack from being managed</li>
<li><strong>Easy to manage</strong> - Simply call a single script to build, teardown, start, stop, pause, etc individual or all environments and or stacks</li>
<li><strong>Security</strong> - Separates secrets from compose and environment files</li>
<li><strong>Privacy</strong> - Only allow git to see files you specify (useful only if you git push to a repo)</li>
<li><strong>Documented</strong> - Automatically documented - check out the <a href="https://jessewebdotcom.github.io/self-hosted/">documentation site</a></li>
</ul>
<h2 id="how-to-use">How To Use</h2>
<p>Use <code>/tools/compose.sh</code> to perform any docker compose action (ex. up, down, start, restart, etc) on an environment, its stacks, and or its stack items</p>
<p>Some example commands</p>
<table>
<thead>
<tr>
<th>Purpose</th>
<th>Example Command</th>
</tr>
</thead>
<tbody>
<tr>
<td>compose <code>up</code> all stacks in <code>production</code> environment</td>
<td><code>compose.sh production up</code></td>
</tr>
<tr>
<td>compose <code>up</code> the <code>writing</code> stack in <code>production</code> environment</td>
<td><code>compose.sh production.writing up</code></td>
</tr>
<tr>
<td>compose <code>up</code> <code>ghost</code> in the <code>writing</code> stack in <code>production</code> environment</td>
<td><code>compose.sh production.writing.ghost up</code></td>
</tr>
</tbody>
</table>
<p>The examples above used the action <code>up</code> but you can use any docker compose action (ex. up, down, start, restart, etc).</p>
<p>For example, to <code>restart</code> all containers in the <code>production</code> environment <code>writing</code> stack:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>/tools/compose.sh<span class="w"> </span>production.writing<span class="w"> </span>restart
</span></code></pre></div>
<p>You can also use the custom action <code>rebuild</code> to compose <code>down</code> and <code>up</code>.
For example, to compose <code>down</code> and <code>up</code> all containers in the <code>production</code> environment <code>writing</code> stack:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>/tools/compose.sh<span class="w"> </span>production.writing<span class="w"> </span>rebuild
</span></code></pre></div>
<h2 id="prerequisites">Prerequisites</h2>
<ul>
<li>docker</li>
<li>docker compose</li>
<li>make <code>.sh</code> files in <code>/tools</code> executable</li>
<li>ex. <code>chmod +x tools/*.sh</code></li>
</ul>
<h2 id="configuration">Configuration</h2>
<ol>
<li>create your desired environment and optional environment .env</li>
</ol>
<p>ex.
   <code>/environments/production</code>
   <code>/environments/production/.env</code></p>
<ol>
<li>create any stacks and optional stack .env</li>
</ol>
<p>ex.
   <code>/environments/production/writing</code>
   <code>/environments/production/writing/.env</code></p>
<ol>
<li>optionally create and fill a stacks.txt (with ordered stack names, only used by <code>tools/compose.sh</code> when composing an entire environment)</li>
</ol>
<p>ex.
   <code>/environments/production/stacks.txt</code></p>
<ol>
<li>create a compose file, optional environment file, and optional secrets file per container</li>
</ol>
<p>ex.
   <code>/environments/production/writing/ghost.yml</code>
   <code>/environments/production/writing/ghost.env</code>
   <code>/environments/production/writing/ghost.secrets</code></p>
<ol>
<li>optionally, include any files you want git to see in <code>/.gitignore</code></li>
</ol>
<h3 id="compose-files">compose files</h3>
<p>To make my compose files more readable (and smaller in size / line count), I place commonly repeated lines in <code>/environments/common-services.yml</code> and reference with an <a href="https://docs.docker.com/compose/extends/"><code>extends</code></a> keyword.</p>
<h3 id="env-and-secrets">.env and .secrets</h3>
<p><code>.env</code> and <code>.secrets</code> are both environment files where <code>.env</code>stores non-sensitive data (ex. timezone) and <code>.secrets</code> stores sensitive data (ex. password).</p>
<p>You can have overlapping key names which are resolved in the following order (from most to least precendence):</p>
<ul>
<li>item .secrets (ex. <code>/environments/production/writing/ghost.secrets</code>)</li>
<li>item .env (ex. <code>/environments/production/writing/ghost.env</code>)</li>
<li>stack .env (ex. <code>/environments/production/writing/.env</code>)</li>
<li>environment .env (ex. <code>/environments/production/.env</code>)</li>
<li>environments .env (ex. <code>/environments/.env</code>)</li>
</ul>
<h4 id="variable-substitution">Variable Substitution</h4>
<p><code>/tools/compose.sh</code> will dynamically replace referenced variables in <code>.env</code> and <code>.secrets</code>. For example, let's say this is your environment <code>.env</code> file:</p>
<div class="language-ini highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="na">NETWORK_HOST</span><span class="o">=</span><span class="s">192.168.1.200</span>
</span></code></pre></div>
<p>And <code>media/something.env</code> contains:</p>
<div class="language-ini highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="na">SOMETHING_URL</span><span class="o">=</span><span class="s">http://${NETWORK_HOST}:9999</span>
</span></code></pre></div>
<p>The final environment variables used to compose would be:</p>
<div class="language-ini highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="na">NETWORK_HOST</span><span class="o">=</span><span class="s">192.168.1.200</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="na">SOMETHING_URL</span><span class="o">=</span><span class="s">http://192.168.1.200:9999</span>
</span></code></pre></div>
<h4 id="example-secrets">Example Secrets</h4>
<p><code>/tools/compose.sh</code> will automatically create a copy of every <code>.secrets</code> file, clear out the values (leaving key names), and add a <code>.example</code> extension. If you include these files in your <code>/.gitignore</code>, they can help others understand what secret variables are required without seeing your secret values.</p>
<h3 id="stackstxt">stacks.txt</h3>
<p><code>stacks.txt</code> is a filter for <code>/tools/compose.sh</code> when composing an environment. Normally, all stacks will be processed in alphabetical order when composing an environment (ex. <code>compose.sh production up</code>, <code>compose.sh production down</code>, <code>compose.sh production restart</code>, etc).</p>
<p>But if you have a non-empty <code>stacks.txt</code> with valid stack names (1 per line), each stack will be composed in the ordered specified.</p>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="traefik-not-serving-ssl-certs">Traefik not serving SSL certs</h3>
<p>Probably need to chmod 600 acme.json</p>
<h3 id="s6-overlay-suexec-fatal-can-only-run-as-pid-1">s6-overlay-suexec: fatal: can only run as pid 1</h3>
<p>if you see the error below and use <code>/environments/common-services.yml</code>, set the extends service to <code>base</code> or <code>with_networks</code></p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>s6-overlay-suexec:<span class="w"> </span>fatal:<span class="w"> </span>can<span class="w"> </span>only<span class="w"> </span>run<span class="w"> </span>as<span class="w"> </span>pid<span class="w"> </span><span class="m">1</span>
</span></code></pre></div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy", "navigation.instant"], "search": "../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.a51614de.min.js"></script>
      
    
  </body>
</html>